<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8" />
    <title>Հարցերի Անիվ - Մաթեմատիկայի Խաղ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 30px 10px;
            user-select: none;
            overflow-x: hidden;
            position: relative;
        }
        h1 {
            margin-bottom: 25px;
            font-size: 3.4rem;
            color: #2c3e50;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            background: linear-gradient(45deg, #2c3e50, #3498db);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        @keyframes slideIn {
            from {
                transform: translateY(-40px) scale(0.95);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
        .menu {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            animation: fadeIn 1s ease-out 0.3s both;
        }
        .menu button {
            padding: 15px 35px;
            font-size: 1.25rem;
            border: none;
            border-radius: 18px;
            cursor: pointer;
            background: linear-gradient(45deg, #38ada9, #78e08f);
            color: white;
            font-weight: 700;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.22);
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .menu button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        .menu button:hover:not(:disabled) {
            transform: scale(1.07) rotate(-1.5deg);
            background: linear-gradient(45deg, #079992, #38ada9);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.28);
        }
        .menu button:hover::before {
            left: 100%;
        }
        .menu button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            box-shadow: none;
        }
        .game-container {
            display: none;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 1.8s ease forwards;
            width: 100%;
            max-width: 600px;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .wheel-container {
            position: relative;
            animation: scaleIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            margin-bottom: 20px;
        }
        @keyframes scaleIn {
            0% {
                transform: scale(0.65) rotate(15deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }
        canvas {
            border: 14px solid #fff;
            border-radius: 50%;
            background-color: #fdfdfd;
            box-shadow: 
                0 0 30px rgba(0, 0, 0, 0.25),
                0 10px 30px rgba(0, 0, 0, 0.1);
            user-select: none;
            transition: transform 0.3s ease;
        }
        canvas:hover {
            transform: scale(1.02);
        }
        .pointer {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 50px solid #e74c3c;
            position: absolute;
            top: calc(50% - 230px - 80px);
            left: calc(50% - 25px);
            z-index: 10;
            transform: rotate(180deg);
            transform-origin: center bottom;
            filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.25));
            animation: pulse 1.5s infinite alternate;
        }
        @keyframes pulse {
            from {
                transform: rotate(180deg) scale(1);
                filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.25));
            }
            to {
                transform: rotate(180deg) scale(1.1);
                filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.35));
            }
        }
        #spin {
            margin-top: 35px;
            padding: 18px 50px;
            font-size: 22px;
            background: linear-gradient(45deg, #ff6f61, #ff9478);
            color: white;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            font-weight: 800;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
            transition: 0.45s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        #spin::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff4e50, #f9d423);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        #spin:hover:not(:disabled) {
            transform: scale(1.07) rotate(1.5deg);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.32);
        }
        #spin:hover::after {
            opacity: 1;
        }
        #spin:disabled {
            cursor: not-allowed;
            opacity: 0.5;
            box-shadow: none;
            transform: none;
        }
        #result {
            margin-top: 35px;
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            max-width: 90%;
            background-color: white;
            padding: 25px 22px;
            border-radius: 18px;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
            overflow-wrap: break-word;
            min-height: 100px;
            line-height: 1.5;
            color: #2c3e50;
            user-select: text;
            position: relative;
            overflow: hidden;
        }
        #result::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(38, 166, 154, 0.1), transparent);
            z-index: 0;
        }
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
            max-width: 600px;
        }
        .controls button {
            flex: 1 1 180px;
            padding: 14px 25px;
            border-radius: 14px;
            border: none;
            font-size: 18px;
            color: white;
            cursor: pointer;
            font-weight: 700;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
            transition: all 0.35s ease;
            user-select: none;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }
        #btn-add {
            background: linear-gradient(45deg, #3498db, #2ecc71);
        }
        #btn-add:hover {
            background: linear-gradient(45deg, #2980b9, #27ae60);
            transform: translateY(-2px);
        }
        #btn-edit {
            background: linear-gradient(45deg, #9b59b6, #e74c3c);
        }
        #btn-edit:hover {
            background: linear-gradient(45deg, #8e44ad, #c0392b);
            transform: translateY(-2px);
        }
        .math-symbols {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        .math-symbol {
            position: absolute;
            font-size: 24px;
            color: #3498db;
            animation: float 15s infinite linear;
            opacity: 0;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg) scale(1.2);
                opacity: 0;
            }
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.65);
            justify-content: center;
            align-items: center;
            z-index: 1100;
            animation: fadeInModal 0.3s ease forwards;
        }
        @keyframes fadeInModal {
            from {
                opacity: 0;
                backdrop-filter: blur(0);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(5px);
            }
        }
        .modal .modal-content {
            background: #fff;
            padding: 28px 35px;
            border-radius: 20px;
            width: 360px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.32);
            display: flex;
            flex-direction: column;
            user-select: text;
            animation: modalSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            transform: translateY(20px);
            position: relative;
            overflow: hidden;
        }
        @keyframes modalSlideIn {
            to {
                transform: translateY(0);
            }
        }
        .modal .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, #38ada9, #78e08f);
        }
        .modal h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: 800;
            font-size: 1.6rem;
            text-align: center;
        }
        .modal select,
        .modal input {
            padding: 12px 15px;
            margin-bottom: 16px;
            font-size: 18px;
            border: 2px solid #ccc;
            border-radius: 14px;
            outline-offset: 3px;
            outline-color: #38ada9;
            transition: all 0.35s ease;
        }
        .modal select:focus,
        .modal input:focus {
            border-color: #38ada9;
            box-shadow: 0 0 8px #38ada9aa;
            transform: translateY(-2px);
        }
        .modal .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            gap: 12px;
        }
        .modal button {
            flex: 1;
            padding: 12px 16px;
            font-weight: 700;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            color: white;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            transition: all 0.35s ease;
            user-select: none;
            white-space: nowrap;
        }
        .delete-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        .delete-btn:hover {
            background: linear-gradient(45deg, #c0392b, #e74c3c);
            transform: translateY(-2px);
        }
        .save-btn {
            background: linear-gradient(45deg, #27ae60, #1e8449);
        }
        .save-btn:hover {
            background: linear-gradient(45deg, #1e8449, #27ae60);
            transform: translateY(-2px);
        }
        .close-btn {
            background: linear-gradient(45deg, #7f8c8d, #707b7c);
        }
        .close-btn:hover {
            background: linear-gradient(45deg, #707b7c, #7f8c8d);
            transform: translateY(-2px);
        }
        /* Scrollbar for select dropdown */
        #questionSelect {
            max-height: 130px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="math-symbols" id="mathSymbols"></div>
    
    <h1>Մաթեմատիկայի Անիվ</h1>
    <div class="menu">
        <button onclick="startGame()">Հարցերի Անիվ</button>
    </div>
    <div class="game-container" id="game">
        <div class="wheel-container">
            <div class="pointer"></div>
            <canvas id="wheel" width="450" height="450"></canvas>
        </div>
        <button id="spin">Պտտել Անիվը</button>
        <div class="controls">
            <button id="btn-add">➕ Ավելացնել Հարց</button>
            <button id="btn-edit">✏️ Խմբագրել / Ջնջել Հարց</button>
        </div>
        <div id="result"></div>
    </div>
    
    <!-- Modal for Edit/Delete -->
    <div id="editModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="editModalTitle">
        <div class="modal-content" role="document">
            <h2 id="editModalTitle">Խմբագրել / Ջնջել Հարց</h2>
            <select id="questionSelect" aria-label="Ընտրել հարց"></select>
            <input id="editQuestionInput" type="text" placeholder="Հարց" aria-label="Խմբագրել հարցը" autocomplete="off" />
            <div class="modal-buttons">
                <button id="deleteQuestionBtn" class="delete-btn" aria-label="Ջնջել հարցը">Ջնջել Հարցը</button>
                <button id="saveQuestionBtn" class="save-btn" aria-label="Պահպանել հարցը">Պահպանել</button>
                <button id="closeEditModalBtn" class="close-btn" aria-label="Փակել մոդալը">Փակել</button>
            </div>
        </div>
    </div>
    
    <!-- Modal for Adding Question -->
    <div id="addModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="addModalTitle">
        <div class="modal-content" role="document">
            <h2 id="addModalTitle">Ավելացնել Նոր Հարց</h2>
            <input id="addQuestionInput" type="text" placeholder="Ներմուծեք հարցը (օր․՝ 7 + 3)" aria-label="Նոր հարց" autocomplete="off" />
            <div class="modal-buttons">
                <button id="addQuestionBtn" class="save-btn" aria-label="Ավելացնել">Ավելացնել</button>
                <button id="closeAddModalBtn" class="close-btn" aria-label="Չեղարկել">Չեղարկել</button>
            </div>
        </div>
    </div>
    
    <script>
        // Բազային հարցեր
        let questions = [
            { question: "5 + 7"},
            { question: "12 - 4"},
            { question: "3 × 6"},
            { question: "20 ÷ 4"},
            { question: "8 + 9"},
            { question: "15 - 7"},
            { question: "4 × 5"},
            { question: "18 ÷ 3"}
        ];
        const canvas = document.getElementById("wheel");
        const ctx = canvas.getContext("2d");
        const spinBtn = document.getElementById("spin");
        const resultDiv = document.getElementById("result");
        const editModal = document.getElementById("editModal");
        const addModal = document.getElementById("addModal");
        const questionSelect = document.getElementById("questionSelect");
        const editQuestionInput = document.getElementById("editQuestionInput");
        const addQuestionInput = document.getElementById("addQuestionInput");
        const saveQuestionBtn = document.getElementById("saveQuestionBtn");
        const addQuestionBtn = document.getElementById("addQuestionBtn");
        const deleteQuestionBtn = document.getElementById("deleteQuestionBtn");
        const closeEditModalBtn = document.getElementById("closeEditModalBtn");
        const closeAddModalBtn = document.getElementById("closeAddModalBtn");
        const addBtn = document.getElementById("btn-add");
        const editBtn = document.getElementById("btn-edit");
        const mathSymbolsContainer = document.getElementById("mathSymbols");
        
        // Անիվի պարամետրեր
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 200;
        const colors = [
            "#38ada9",
            "#079992",
            "#60a3bc",
            "#3c6382",
            "#78e08f",
            "#38ada9",
            "#079992",
            "#60a3bc",
        ];
        
        // Անիվի պտտման փոփոխականներ
        let currentAngle = 0;
        let spinTime = 0;
        let spinTimeTotal = 0;
        let spinAngleStart = 0;
        
        // Կենտրոնի պտտվող նշաններ
        let symbolAngle = 0;
        const symbols = ["+", "-", "×", "÷", "=", "≠", "≈", "√", "π", "∞"];
        const symbolColors = ["#e74c3c", "#3498db", "#2ecc71", "#f39c12", "#9b59b6", "#1abc9c", "#d35400", "#34495e"];
        
        // Create floating math symbols background
        function createMathSymbols() {
            const mathSymbols = ["+", "-", "×", "÷", "=", "≠", "≈", "√", "π", "∞", "∫", "∑", "∆", "∏", "∈", "∉", "∩", "∪"];
            const colors = ["#3498db", "#e74c3c", "#2ecc71", "#f39c12", "#9b59b6", "#1abc9c"];
            
            // Clear existing symbols
            mathSymbolsContainer.innerHTML = '';
            
            // Create new symbols
            for (let i = 0; i < 50; i++) {
                const symbol = document.createElement("div");
                symbol.className = "math-symbol";
                symbol.textContent = mathSymbols[Math.floor(Math.random() * mathSymbols.length)];
                symbol.style.color = colors[Math.floor(Math.random() * colors.length)];
                symbol.style.left = Math.random() * 100 + "vw";
                symbol.style.fontSize = (Math.random() * 20 + 16) + "px";
                symbol.style.animationDuration = (Math.random() * 20 + 10) + "s";
                symbol.style.animationDelay = Math.random() * 5 + "s";
                mathSymbolsContainer.appendChild(symbol);
            }
        }
        
        function drawWheel() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const sliceAngle = (2 * Math.PI) / questions.length;
            
            // Draw gradient background
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
            gradient.addColorStop(0, "rgba(255,255,255,0.8)");
            gradient.addColorStop(1, "rgba(230,240,255,0.5)");
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            for (let i = 0; i < questions.length; i++) {
                const angle = currentAngle + i * sliceAngle;
                
                // Create gradient for each segment
                const segmentGradient = ctx.createLinearGradient(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius,
                    centerX + Math.cos(angle + sliceAngle) * radius,
                    centerY + Math.sin(angle + sliceAngle) * radius
                );
                segmentGradient.addColorStop(0, colors[i % colors.length]);
                segmentGradient.addColorStop(1, lightenColor(colors[i % colors.length], 20));
                
                ctx.fillStyle = segmentGradient;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + sliceAngle, false);
                ctx.lineTo(centerX, centerY);
                ctx.fill();
                ctx.strokeStyle = "#fff";
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Տեքստի բարելավված դիրքավորում
                ctx.save();
                ctx.fillStyle = "#fff";
                ctx.font = "bold 18px 'Segoe UI', Arial, sans-serif";
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + sliceAngle / 2);
                ctx.textAlign = "right";
                ctx.textBaseline = "middle";
                const text = questions[i].question;
                const maxWidth = radius - 40;
                
                // Կրճատում, եթե տեքստը երկար է
                let displayText = text;
                while (ctx.measureText(displayText).width > maxWidth && displayText.length > 3) {
                    displayText = displayText.slice(0, -1);
                }
                if (displayText !== text) displayText += "...";
                
                ctx.fillText(displayText, radius - 30, 0);
                ctx.restore();
            }
            
            // Draw center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, 80, 0, Math.PI * 2);
            ctx.fillStyle = "rgba(255,255,255,0.9)";
            ctx.fill();
            ctx.strokeStyle = "rgba(52, 152, 219, 0.7)";
            ctx.lineWidth = 8;
            ctx.stroke();
            
            // Կենտրոնի նշանները
            drawCenterSymbols();
        }
        
        function lightenColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16),
                amt = Math.round(2.55 * percent),
                R = (num >> 16) + amt,
                G = (num >> 8 & 0x00FF) + amt,
                B = (num & 0x0000FF) + amt;
            return "#" + (
                0x1000000 +
                (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)
            ).toString(16).slice(1);
        }
        
        function drawCenterSymbols() {
            ctx.save();
            ctx.translate(centerX, centerY);
            const symbolRadius = 60;
            const symbolFontSize = 24;
            
            for (let i = 0; i < symbols.length; i++) {
                const angle = symbolAngle + (i * (2 * Math.PI)) / symbols.length;
                const x = symbolRadius * Math.cos(angle);
                const y = symbolRadius * Math.sin(angle);
                
                ctx.font = `bold ${symbolFontSize}px 'Segoe UI', Arial, sans-serif`;
                ctx.fillStyle = symbolColors[i % symbolColors.length];
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                
                // Add pulsing animation to symbols
                const scale = 1 + Math.sin(Date.now() / 300 + i) * 0.1;
                ctx.save();
                ctx.translate(x, y);
                ctx.scale(scale, scale);
                ctx.fillText(symbols[i], 0, 0);
                ctx.restore();
            }
            
            ctx.restore();
            symbolAngle += 0.01;
        }
        
        function easeOut(t, b, c, d) {
            const ts = (t /= d) * t;
            const tc = ts * t;
            return b + c * (tc + -3 * ts + 3 * t);
        }
        
        function rotateWheel() {
            spinTime += 30;
            if (spinTime >= spinTimeTotal) {
                stopRotateWheel();
                return;
            }
            
            const spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
            currentAngle += (spinAngle * Math.PI) / 180;
            drawWheel();
            requestAnimationFrame(rotateWheel);
        }
        
        function stopRotateWheel() {
            spinBtn.disabled = false;
            
            // Ընտրել հաղթող հատվածը
            const degrees = (currentAngle * 180) / Math.PI + 90;
            const arcd = 360 / questions.length;
            const index = Math.floor(((360 - (degrees % 360)) % 360) / arcd);
            const selected = questions[index];
            
            // Animate result appearance
            resultDiv.style.animation = "none";
            resultDiv.offsetHeight; // Trigger reflow
            resultDiv.style.animation = "fadeIn 0.8s ease forwards";
            
            resultDiv.innerHTML = `<strong>Հարցը:</strong> ${selected.question}`;
        }
        
        function startSpin() {
            if (questions.length < 2) {
                alert("Խնդրում եմ ավելացրեք առնվազն 2 հարց պտտման համար:");
                return;
            }
            
            spinBtn.disabled = true;
            resultDiv.textContent = "";
            spinAngleStart = Math.floor(Math.random() * 360) + 720; // 2-3 պտույտ
            spinTime = 0;
            spinTimeTotal = Math.floor(Math.random() * 2000) + 3500;
            rotateWheel();
        }
        
        // Modal-ի գործառույթներ
        function openEditModal() {
            editModal.style.display = "flex";
            editModal.setAttribute("aria-hidden", "false");
            populateQuestionSelect();
        }
        
        function closeEditModal() {
            editModal.style.display = "none";
            editModal.setAttribute("aria-hidden", "true");
        }
        
        function openAddModal() {
            addModal.style.display = "flex";
            addModal.setAttribute("aria-hidden", "false");
            addQuestionInput.value = "";
            setTimeout(() => {
                addQuestionInput.focus();
            }, 100);
        }
        
        function closeAddModal() {
            addModal.style.display = "none";
            addModal.setAttribute("aria-hidden", "true");
        }
        
        function populateQuestionSelect() {
            questionSelect.innerHTML = "";
            questions.forEach((q, i) => {
                const option = document.createElement("option");
                option.value = i;
                option.textContent = q.question;
                questionSelect.appendChild(option);
            });
            
            if (questions.length > 0) {
                questionSelect.selectedIndex = 0;
                editQuestionInput.value = questions[0].question;
            } else {
                editQuestionInput.value = "";
            }
        }
        
        questionSelect.addEventListener("change", () => {
            const idx = questionSelect.value;
            editQuestionInput.value = questions[idx] ? questions[idx].question : "";
        });
        
        saveQuestionBtn.addEventListener("click", () => {
            const idx = questionSelect.value;
            const newQuestion = editQuestionInput.value.trim();
            
            if (!newQuestion) {
                alert("Հարցը չի կարող լինել դատարկ:");
                return;
            }
            
            if (questions[idx]) {
                questions[idx].question = newQuestion;
            }
            
            drawWheel();
            closeEditModal();
        });
        
        deleteQuestionBtn.addEventListener("click", () => {
            const idx = questionSelect.value;
            
            if (questions.length <= 2) {
                alert("Անվտանգության համար անհրաժեշտ է գոնե 2 հարց:");
                return;
            }
            
            if (confirm(`Ջնջե՞լ հարցը՝ "${questions[idx].question}"`)) {
                questions.splice(idx, 1);
                populateQuestionSelect();
                drawWheel();
                
                if (questions.length === 0) {
                    closeEditModal();
                }
            }
        });
        
        addQuestionBtn.addEventListener("click", () => {
            const newQuestion = addQuestionInput.value.trim();
            
            if (!newQuestion) {
                alert("Հարցը չի կարող լինել դատարկ:");
                return;
            }
            
            questions.push({ question: newQuestion });
            drawWheel();
            closeAddModal();
            addQuestionInput.value = "";
        });
        
        addQuestionInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                addQuestionBtn.click();
            }
        });
        
        editQuestionInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                saveQuestionBtn.click();
            }
        });
        
        closeEditModalBtn.addEventListener("click", closeEditModal);
        closeAddModalBtn.addEventListener("click", closeAddModal);
        
        // Update button listeners to use modals
        addBtn.addEventListener("click", openAddModal);
        editBtn.addEventListener("click", openEditModal);
        spinBtn.addEventListener("click", startSpin);
        
        // Create floating math symbols background
        createMathSymbols();
        
        // Refresh background symbols periodically
        setInterval(createMathSymbols, 20000);
        
        // Նախնական նկարչություն
        drawWheel();
        
        // Հիմնական խաղի ցուցադրում
        function startGame() {
            document.getElementById("game").style.display = "flex";
            document.getElementById("game").style.animation = "fadeIn 1s ease forwards";
        }
        
        // Keep the wheel animation going even when not spinning
        function animateWheel() {
            drawWheel();
            requestAnimationFrame(animateWheel);
        }
        
        // Start the continuous animation
        animateWheel();
    </script>
</body>
</html>